!function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(i,o,function(t){return e[t]}.bind(null,o));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);var i=function e(t,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.type=t,this.backgroundCoords=n,this.worth=i},o={onion:{growthCycle:5,stages:[["-80px","0px"],["-62px","0px"],["-46px","0px"],["-32px","0px"],["-16px","0px"]],worth:5},"string-bean":{growthCycle:10,stages:[["-80px","-16px"],["-62px","-16px"],["-46px","-16px"],["-32px","-16px"],["-16px","-16px"]],worth:10},tomato:{growthCycle:15,stages:[["-80px","-32px"],["-62px","-32px"],["-46px","-32px"],["-32px","-32px"],["-16px","-32px"]],worth:15},plum:{growthCycle:20,stages:[["-80px","-48px"],["-62px","-48px"],["-46px","-48px"],["-32px","-48px"],["-16px","-48px"]],worth:20},pineapple:{growthCycle:25,stages:[["-80px","-64px"],["-62px","-64px"],["-46px","-64px"],["-32px","-64px"],["-16px","-64px"]],worth:25},strawberry:{growthCycle:30,stages:[["-80px","-96px"],["-62px","-96px"],["-46px","-96px"],["-32px","-96px"],["-16px","-96px"]],worth:30},potato:{growthCycle:35,stages:[["-80px","-112px"],["-62px","-112px"],["-46px","-112px"],["-32px","-112px"],["-16px","-112px"]],worth:35},pumpkin:{growthCycle:40,stages:[["-80px","-128px"],["-62px","-128px"],["-46px","-128px"],["-32px","-128px"],["-16px","-128px"]],worth:40},corn:{growthCycle:45,stages:[["-80px","-144px"],["-62px","-144px"],["-46px","-144px"],["-32px","-144px"],["-16px","-144px"]],worth:45}};function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var s=function(){function e(t,n,i,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.type=t,this.x=i,this.y=a,this.timeStamp=n,this.isWatered=!1,this.isReadyToHarvest=!1,this.growthCycle=null,this.age=0,this.currentStage=0,this.stages=null,this.domElement=document.createElement("div"),this.domElement.className="crop-container",this.domElement.style.left=16*this.x+"px",this.domElement.style.top=32*this.y+"px";var s=document.createElement("div");s.className="crop ".concat(t),this.domElement.appendChild(s),this.stages=o[t].stages,this.growthCycle=o[t].growthCycle,this.worth=o[t].worth;var r=this.stages[this.currentStage];s.style.backgroundPosition=r.join(" ")}var t,n,s;return t=e,(n=[{key:"grow",value:function(){this.isWatered&&!this.isReadyToHarvest&&(this.age++,this.age>this.growthCycle&&this.growToNextStage())}},{key:"growToNextStage",value:function(){if(this.currentStage++,this.currentStage===this.stages.length)this.isReadyToHarvest=!0;else{var e=this.stages[this.currentStage];this.domElement.firstElementChild.style.backgroundPosition=e.join(" ")}this.isWatered=!1,this.domElement.firstElementChild.classList.remove("watered"),this.age=0}},{key:"water",value:function(){this.isWatered=!0,this.domElement.firstElementChild.classList.add("watered")}},{key:"kill",value:function(){this.domElement.remove()}},{key:"harvest",value:function(){return new i(this.type,["0px",this.stages[0][1]],this.worth)}}])&&a(t.prototype,n),s&&a(t,s),e}();function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var l=function(){function e(t,n,i,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.x=t,this.y=n,this.isPlantable=i,this.isWalkable=o,this.isShop=!1,this.crop=null}var t,n,i;return t=e,(n=[{key:"waterCrop",value:function(){this.crop.water()}},{key:"createCrop",value:function(e,t){this.isPlantable=!1,this.crop=new s(e,t,this.x,this.y)}},{key:"destroyCrop",value:function(){this.crop.kill(),this.crop=null,this.isPlantable=!0}},{key:"harvestCrop",value:function(){return this.crop.harvest()}},{key:"setShop",value:function(e){this.isShop=e}},{key:"hasCrop",get:function(){return!!this.crop}},{key:"isCropWatered",get:function(){return!!this.crop.isWatered}},{key:"isCropReadyToHarvest",get:function(){return!!this.crop.isReadyToHarvest}}])&&r(t.prototype,n),i&&r(t,i),e}();function c(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var h=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.tileMap=this.generateTileMap(),this.plantedTiles=[]}var t,n,i;return t=e,(n=[{key:"generateTileMap",value:function(){for(var e={},t=new Set([2,3,4,5,6,7,8,9,10,11,12,13,14]),n=0,i=0;i<8;i++){for(var o=0,a=0;a<20;a++){var s,r=!1,c=!1;a&&i&&6!==i&&7!==i?t.has(a)?(r=!0,c=!0):(r=!0,c=!1):(c=!1,r=!1),s=new l(o,n,c,r),e["".concat(o,"/").concat(n)]=s,o++}o=0,n++}return e}},{key:"ageCrops",value:function(){this.plantedTiles.length&&this.plantedTiles.forEach((function(e){return e.crop.grow()}))}},{key:"getTile",value:function(e,t){return this.tileMap["".concat(e,"/").concat(t)]}},{key:"addPlantedTile",value:function(e){this.plantedTiles.push(e)}},{key:"checkIfWalkable",value:function(e,t){var n=this.tileMap["".concat(e,"/").concat(t)];return!!n&&n.isWalkable}},{key:"checkIfPlantable",value:function(e,t){var n=this.tileMap["".concat(e,"/").concat(t)];return!!n&&n.isPlantable}},{key:"removePlantedTile",value:function(e){e.destroyCrop(),this.plantedTiles=this.plantedTiles.filter((function(t){return t!==e}))}},{key:"setShop",value:function(e,t){this.getTile(e,t).setShop(!0)}}])&&c(t.prototype,n),i&&c(t,i),e}();function u(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var d=function(){function e(t,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.x=t,this.y=n,this.direction=i,this.domElement=document.createElement("div"),this.domElement.className="player ".concat(this.direction),this.updatePositionOnDom(),this.playSound=null}var t,n,i;return t=e,(n=[{key:"playSoundCb",value:function(e){this.playSound=e}},{key:"setListeners",value:function(){var e=this;this.domElement.addEventListener("transitionstart",(function(){e.playSound("step"),e.domElement.classList.contains("walking")||e.domElement.classList.add("walking")})),this.domElement.addEventListener("transitionend",(function(){e.domElement.classList.remove("walking")}))}},{key:"updatePosition",value:function(e,t){this.x=e,this.y=t,this.updatePositionOnDom()}},{key:"updateDirection",value:function(e){e!==this.direction&&(this.direction=e,this.updateDirectionOnDom())}},{key:"updatePositionOnDom",value:function(){this.domElement.style.left=16*this.x+"px",this.domElement.style.top=32*this.y+"px"}},{key:"updateDirectionOnDom",value:function(){this.domElement.className="player ".concat(this.direction)}},{key:"position",get:function(){return[this.x,this.y]}}])&&u(t.prototype,n),i&&u(t,i),e}();function p(e){return function(e){if(Array.isArray(e))return f(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function v(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var y=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.selectedToolIndex=0,this.tools=["inventory","shovel","watering-can","hoe"],this.domElement=this.createToolSet()}var t,n,i;return t=e,(n=[{key:"createToolSet",value:function(){var e=document.createElement("div");e.className="tools-container";var t=this.tools.map((function(e){var t=document.createElement("div");t.className="tool-block";var n=document.createElement("div");return n.className="tool ".concat(e),t.appendChild(n),t}));return t[0].classList.add("selected"),e.append.apply(e,p(t)),e}},{key:"navigate",value:function(e){var t=this;({previous:function(){t.selectedToolIndex?t.selectedToolIndex--:t.selectedToolIndex=t.tools.length-1},next:function(){t.selectedToolIndex===t.tools.length-1?t.selectedToolIndex=0:t.selectedToolIndex++}})[e](),this.updateToolSelection()}},{key:"updateToolSelection",value:function(){for(var e=0;e<this.domElement.children.length;e++)this.domElement.children[e].classList.remove("selected");this.domElement.children[this.selectedToolIndex].classList.add("selected")}},{key:"selectedActionToExecute",get:function(){return this.tools[this.selectedToolIndex]}}])&&v(t.prototype,n),i&&v(t,i),e}();var m=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.type=t;this.worth={onion:2,"string-bean":5,tomato:7,plum:10,pineapple:12,strawberry:15,potato:17,pumpkin:20,corn:22}[t]};function g(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var w=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.seeds={},this.crops={}}var t,n,i;return t=e,(n=[{key:"generateStarterSeeds",value:function(e){for(var t=["onion","string-bean","tomato","plum","pineapple","strawberry","potato","pumpkin","corn"],n=0;n<t.length;n++)for(var i=0;i<e;i++)this.addSeed(new m(t[n]))}},{key:"generatePlayerSeeds",value:function(){for(var e=0;e<3;e++)this.addSeed(new m("onion"))}},{key:"addSeed",value:function(e){var t=this.seeds[e.type];t?t.push(e):this.seeds[e.type]=[e]}},{key:"removeSeed",value:function(e){var t=this.seeds[e];if(t){var n=t.pop();return t.length||delete this.seeds[e],n}}},{key:"addCrop",value:function(e){this.crops[e.type]=this.crops[e.type]||[],this.crops[e.type].push(e)}},{key:"removeCrop",value:function(e){var t=this.crops[e].pop();return this.crops[e].length||delete this.crops[e],t}},{key:"getSeeds",value:function(){return this.seeds}},{key:"getCrops",value:function(){return this.crops}},{key:"getInventory",value:function(){return{seeds:this.seeds,crops:this.crops}}}])&&g(t.prototype,n),i&&g(t,i),e}();function b(e){return function(e){if(Array.isArray(e))return S(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||x(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],i=!0,o=!1,a=void 0;try{for(var s,r=e[Symbol.iterator]();!(i=(s=r.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(e){o=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(o)throw a}}return n}(e,t)||x(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e,t){if(e){if("string"==typeof e)return S(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?S(e,t):void 0}}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function k(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var T=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.modalContainer=t,this.setView=null,this.setCurrentTile=null,this.elementsToNavigate=null,this.navigationPosition=0,this.selected=null,this.plantSeed=null,this.shopView=null,this.isBalanceSufficient=null,this.purchaseSeed=null,this.sellCrop=null}var t,n,i;return t=e,(n=[{key:"show",value:function(){this.modalContainer.classList.remove("hidden")}},{key:"hide",value:function(){this.modalContainer.classList.contains("hidden")||this.modalContainer.classList.add("hidden"),this.elementsToNavigate=null,this.selected=null,this.navigationPosition=0,this.setView("map"),this.setCurrentTile(null)}},{key:"setViewCb",value:function(e){this.setView=e}},{key:"setCurrentTileCb",value:function(e){this.setCurrentTile=e}},{key:"setPlantSeedCb",value:function(e){this.plantSeed=e}},{key:"setCheckWalletBalanceCb",value:function(e){this.isBalanceSufficient=e}},{key:"setPurchaseSeedCb",value:function(e){this.purchaseSeed=e}},{key:"setSellCropCb",value:function(e){this.sellCrop=e}},{key:"generateSeedModal",value:function(e){var t=C(this.modalContainer.children[0].children,3),n=t[0],i=t[1],o=t[2];n.innerHTML="",o.innerHTML="",i.textContent="",n.textContent="Select a seed to plant";var a=[];for(var s in e){var r=document.createElement("div");r.className="seed ".concat(s),r.setAttribute("data-type",s);var l=document.createElement("div");l.textContent=e[s].length,r.appendChild(l),a.push(r)}if(a.length){a[0].classList.add("selected"),this.selected=a[0];var c=this.selected.dataset.type;i.textContent=c}else this.selected=null,i.textContent="No more seeds!";this.elementsToNavigate=a,o.append.apply(o,a),this.show()}},{key:"generateInventoryModal",value:function(e,t){var n=C(this.modalContainer.children[0].children,3),i=n[0],o=n[1],a=n[2];i.innerHTML="",o.textContent="",a.innerHTML="",i.textContent="Inventory";var s=[];for(var r in e){var l=document.createElement("div");l.className="crop ".concat(r),l.setAttribute("data-type",r),l.style.backgroundPosition=e[r][0].backgroundCoords.join(" ");var c=document.createElement("div");c.textContent=e[r].length,l.appendChild(c),s.push(l)}for(var h in t){var u=document.createElement("div");u.className="seed ".concat(h),u.setAttribute("data-type",h);var d=document.createElement("div");d.textContent=t[h].length,u.appendChild(d),s.push(u)}if(s.length){s[0].classList.add("selected"),this.selected=s[0];var p=this.selected.dataset.type;o.textContent=p}else this.selected=null,o.textContent="No more items!";this.elementsToNavigate=s,a.append.apply(a,s),this.show()}},{key:"generateShopModal",value:function(e,t){var n=C(this.modalContainer.children[0].children,3),i=n[0],o=n[1],a=n[2];i.innerHTML="",a.innerHTML="",o.textContent="",this.shopView="Buy",i.textContent=this.shopView;var s=[],r=[];for(var l in e){var c=document.createElement("div");c.className="crop ".concat(l),c.style.backgroundPosition=e[l][0].backgroundCoords.join(" "),c.setAttribute("data-type",l),c.setAttribute("data-price",e[l][0].worth);var h=document.createElement("div");h.className="price",h.textContent=e[l][0].worth;var u=document.createElement("div");u.textContent=e[l].length,c.append(h,u),s.push(c)}for(var d in t){var p=document.createElement("div");p.className="seed ".concat(d),p.setAttribute("data-type",d),p.setAttribute("data-price",t[d][0].worth);var f=document.createElement("div");f.textContent=t[d].length;var v=document.createElement("div");v.className="price",v.textContent=t[d][0].worth,p.append(v,f),r.push(p)}if(this.elementsToNavigate={Buy:r,Sell:s},this.elementsToNavigate[this.shopView].length){this.elementsToNavigate[this.shopView][0].classList.add("selected"),this.selected=this.elementsToNavigate[this.shopView][0];var y=this.selected.dataset.type;o.textContent=y}else o.textContent="Out of Stock";a.append.apply(a,b(this.elementsToNavigate[this.shopView])),this.show()}},{key:"navigateSeedModal",value:function(e){var t=this;if(null!==this.elementsToNavigate&&({previous:function(){t.navigationPosition?t.navigationPosition--:t.navigationPosition=t.elementsToNavigate.length-1},next:function(){t.navigationPosition===t.elementsToNavigate.length-1?t.navigationPosition=0:t.navigationPosition++},close:this.hide.bind(this),select:this.selectSeed.bind(this)}[e](),"close"!==e&&"select"!==e)){for(var n=0;n<this.elementsToNavigate.length;n++)this.elementsToNavigate[n].classList.remove("selected");var i=this.elementsToNavigate[this.navigationPosition];i.classList.add("selected"),this.selected=i;var o=this.selected.dataset.type;C(this.modalContainer.children[0].children,2)[1].textContent=o}}},{key:"navigateShopModal",value:function(e){var t=this;if(null!==this.elementsToNavigate){var n=C(this.modalContainer.children[0].children,3),i=n[0],o=n[1],a=n[2];if({previous:function(){t.navigationPosition?t.navigationPosition--:t.navigationPosition=t.elementsToNavigate[t.shopView].length-1},next:function(){t.navigationPosition===t.elementsToNavigate[t.shopView].length-1?t.navigationPosition=0:t.navigationPosition++},close:this.hide.bind(this),select:function(){if(t.elementsToNavigate[t.shopView].length){var e=t.selected.dataset,n=e.type,i=e.price;i=parseInt(i),"Buy"===t.shopView?t.isBalanceSufficient(i)?t.purchaseSeed(n,i):o.textContent="Insufficient Balance":t.sellCrop(n,i)}else o.textContent="Buy"===t.shopView?"Out of Stock":"Empty Inventory"},switch:function(){t.navigationPosition=0,t.shopView="Buy"===t.shopView?"Sell":"Buy",i.textContent=t.shopView;var e=t.elementsToNavigate[t.shopView];a.innerHTML="",a.append.apply(a,b(e))}}[e](),"close"!==e&&"select"!==e){for(var s=this.elementsToNavigate[this.shopView],r=0;r<s.length;r++)s[r].classList.remove("selected");var l=s[this.navigationPosition];if(l){l.classList.add("selected"),this.selected=l;var c=this.selected.dataset.type;o.textContent=c}else o.textContent="Buy"===this.shopView?"Out of Stock":"Empty Inventory",this.selected=null}}}},{key:"resyncShopItemsAfterPurchase",value:function(){var e=this,t=this.selected.lastElementChild,n=parseInt(t.textContent),i=C(this.modalContainer.children[0].children,2)[1];if(1===n)if(this.selected.remove(),this.elementsToNavigate[this.shopView]=this.elementsToNavigate[this.shopView].filter((function(t){return t!==e.selected})),this.elementsToNavigate[this.shopView].length){var o=C(this.elementsToNavigate[this.shopView],1)[0];this.selected=o,this.selected.classList.add("selected");var a=this.selected.dataset.type;i.textContent=a}else this.selected=null,i.textContent="Buy"===this.shopView?"Out of Stock":"Empty Inventory";else n--,t.textContent=n}},{key:"selectSeed",value:function(){if(this.selected){var e=this.selected.dataset.type;this.modalContainer.classList.contains("hidden")||this.modalContainer.classList.add("hidden"),this.elementsToNavigate=null,this.selected=null,this.navigationPosition=0,this.setView("map"),this.plantSeed(e)}}}])&&k(t.prototype,n),i&&k(t,i),e}();function E(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var P=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.x=t,this.y=n,this.shopInventory=new w,this.domElement=document.createElement("div"),this.domElement.className="shop",this.shopInventory.generateStarterSeeds(99)}var t,n,i;return t=e,(n=[{key:"setPositionOnDom",value:function(){this.domElement.style.left=16*this.x+"px",this.domElement.style.top=32*this.y+"px"}},{key:"sellSeed",value:function(e){return this.shopInventory.removeSeed(e)}},{key:"buyCrop",value:function(e){this.shopInventory.addCrop(e)}}])&&E(t.prototype,n),i&&E(t,i),e}();function M(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var A=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.domElement=document.createElement("div"),this.domElement.className="wallet",this.cash=t||0}var t,n,i;return t=e,(n=[{key:"isBalanceSufficient",value:function(e){return this.cash>=e}},{key:"spendCash",value:function(e){this.cash-=e}},{key:"earnCash",value:function(e){this.cash+=e}},{key:"updateCashOnDom",value:function(){this.domElement.textContent="$".concat(this.cash)}}])&&M(t.prototype,n),i&&M(t,i),e}(),I=n.p+"2959fe2381fdfef9dd16b8f30b62c1ee.wav",N=n.p+"9f7abd4fbe41f75d03a5599e85652a06.wav",L=n.p+"ea912c089b0c93794a2aec8bdb5ce333.wav",O=n.p+"f9f154cb9b8ee54cdf5cf209cde2df26.mp3",V=n.p+"ae546e5c24aa29f2121d65d0718246f7.wav",j=n.p+"22f68af3932462a22f2e85483aaf533c.wav";function K(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var D=function(){function e(){for(var t in function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.isMuted=!0,this.domElement=document.createElement("div"),this.domElement.className="mute-button",this.sounds={money:new Audio(I),openInventory:new Audio(N),plant:new Audio(L),step:new Audio(O),tool:new Audio(V),water:new Audio(j)},this.sounds)this.sounds[t].volume=0}var t,n,i;return t=e,(n=[{key:"muteRequest",value:function(){this.isMuted=!this.isMuted,this.isMuted?this.stopPlay():this.setPlay(),this.updateMuteElement()}},{key:"setPlay",value:function(){for(var e in this.sounds)this.sounds[e].volume=.3}},{key:"stopPlay",value:function(){for(var e in this.sounds)this.sounds[e].volume=0}},{key:"playSound",value:function(e){this.isMuted||this.sounds[e].play()}},{key:"updateMuteElement",value:function(){this.isMuted?this.domElement.classList.remove("not-muted"):this.domElement.classList.add("not-muted")}}])&&K(t.prototype,n),i&&K(t,i),e}();function B(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],i=!0,o=!1,a=void 0;try{for(var s,r=e[Symbol.iterator]();!(i=(s=r.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(e){o=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(o)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return H(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return H(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function H(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function W(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var R=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.currentView=0,this.domElement=t;var n=B(this.domElement.firstElementChild.children,3),i=n[0],o=n[1],a=n[2];this.heading=i,this.content=o,this.pageCounter=a.firstElementChild,this.setView=null,this.pages=[{title:"Tutorial",content:"Welcome to farming sim! <br>\n                  Built by Uzair Ashraf <br>\n                  For the No Mouse Mintbean Hackathon Challenge <br>\n                  Please use the left and right arrow keys to navigate through the pages <br>\n                  Press Esc to close the tutorial window"},{title:"Basics",content:"WASD - move your character around <br>\n                  M - unmute/mute sound effects <br>\n                  I - view inventory <br>\n                  ESC - close screens <br>\n                  SPACE - Use tool or interact with shop <br>\n                  "},{title:"Farming",content:"With the correct tool selected you can farm on the brown pieces of land <br>\n                  Space - Use tool <br>\n                  Left Arrow/Right Arrow - Navigate through your tool system"},{title:"Farming - Planting",content:"With the seed bag selected you can select a seed to plant <br>\n                  A/D - Navigate between which seeds to plant in your inventory"},{title:"Farming - Watering",content:"Your plants can only grow if they are watered, to water a plant use the watering can.  Some plants take longer to grow than others. Every time your plant grows you need to water it again"},{title:"Farming - Harvesting",content:"Once you can't water the plant anymore, use the shovel to harvest the crop"},{title:"Farming - Hoeing",content:"To remove a seed/crop use the hoe.  Be careful because this will destroy it."},{title:"Shopping",content:"Once you have crops you can sell them.  You can use the money to purchase different types of seeds <br>\n        Tab - switch between selling and buying <br>\n        A/D - move through items <br>\n        Esc - close shop screen <br>\n        Space - Purchase/Sell Item"},{title:"Thank you!",content:"This game was built in 48 hours, if you would like to see the source code, press the G key!"}]}var t,n,i;return t=e,(n=[{key:"setViewCb",value:function(e){this.setView=e}},{key:"updateContent",value:function(){var e=this.pages[this.currentView];this.heading.textContent=e.title,this.content.innerHTML=e.content,this.pageCounter.textContent="".concat(this.currentView+1," / ").concat(this.pages.length)}},{key:"show",value:function(){this.updateContent(),this.domElement.classList.remove("hidden")}},{key:"hide",value:function(){this.domElement.classList.contains("hidden")||this.domElement.classList.add("hidden"),this.setView("map")}},{key:"navigateTutorial",value:function(e){var t=this;({left:function(){t.currentView?t.currentView--:t.currentView=t.pages.length-1,t.updateContent()},right:function(){t.currentView===t.pages.length-1?t.currentView=0:t.currentView++,t.updateContent()},close:function(){t.hide()},github:function(){window.open("https://github.com/uzair-ashraf/farming-sim-no-mouse-hackathon")}})[e]()}}])&&W(t.prototype,n),i&&W(t,i),e}();function U(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],i=!0,o=!1,a=void 0;try{for(var s,r=e[Symbol.iterator]();!(i=(s=r.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(e){o=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(o)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return F(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return F(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function _(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}new(function(){function e(t,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.container=t,this.time=0,this.gameLoopIntervalId=null,this.shop=new P(17,0),this.map=new h,this.player=new d(19,5,"down"),this.tools=new y,this.inventory=new w,this.modal=new T(n),this.wallet=new A(5),this.sound=new D,this.tutorial=new R(i),this.view="tutorial",this.currentTile=null,this.tutorialKeyMap={ArrowLeft:"left",ArrowRight:"right",g:"github",Escape:"close"},this.playerMovementKeyMap={w:"up",a:"left",s:"down",d:"right"," ":"action",i:"inventory",m:"audio"},this.toolsNavigateKeyMap={ArrowLeft:"previous",ArrowRight:"next"},this.seedSelectionKeyMap={a:"previous",d:"next",ArrowLeft:"previous",ArrowRight:"next",Escape:"close"," ":"select"},this.inventoryKeyMap={a:"previous",d:"next",ArrowLeft:"previous",ArrowRight:"next",Escape:"close"," ":"close",Enter:"close"},this.shopKeyMap={a:"previous",d:"next",Tab:"switch"," ":"select",Enter:"select",Escape:"close"}}var t,n,i;return t=e,(n=[{key:"startGameLoop",value:function(){this.gameLoopIntervalId=setInterval(this.gameLoop.bind(this),1e3)}},{key:"gameLoop",value:function(){this.time++,this.map.ageCrops()}},{key:"setView",value:function(e){this.view=e}},{key:"playSound",value:function(e){this.sound.playSound(e)}},{key:"handleKeyPress",value:function(e){var t=this,n=e.key;e.preventDefault(),"m"!==n?{map:function(){return t.handleMapViewKeyPress(n)},seedSelection:function(){return t.handleSeedSelectionKeyPress(n)},inventory:function(){return t.handleInventorySelectionKeyPress(n)},shop:function(){return t.handleShopSelectionKeyPress(n)},tutorial:function(){return t.handleTutorialNavigationKeyPress(n)}}[this.view]():this.sound.muteRequest()}},{key:"handleMapViewKeyPress",value:function(e){this.playerMovementKeyMap.hasOwnProperty(e)?this.handlePlayerMovement(e):this.toolsNavigateKeyMap.hasOwnProperty(e)&&this.handleToolNavigation(e)}},{key:"handleSeedSelectionKeyPress",value:function(e){var t=this.seedSelectionKeyMap[e];t&&this.modal.navigateSeedModal(t)}},{key:"handleInventorySelectionKeyPress",value:function(e){var t=this.inventoryKeyMap[e];t&&this.modal.navigateSeedModal(t)}},{key:"handleShopSelectionKeyPress",value:function(e){var t=this.shopKeyMap[e];t&&this.modal.navigateShopModal(t)}},{key:"handleTutorialNavigationKeyPress",value:function(e){var t=this.tutorialKeyMap[e];t&&this.tutorial.navigateTutorial(t)}},{key:"handlePlayerMovement",value:function(e){var t=this,n=this.playerMovementKeyMap[e],i=U(this.player.position,2),o=i[0],a=i[1],s={up:function(){return a--},left:function(){return o--},down:function(){return a++},right:function(){return o++}};switch(n){case"action":s[this.player.direction]();var r=this.tools.selectedActionToExecute,l=this.map.getTile(o,a);l.isShop?(this.modal.generateShopModal(this.inventory.getCrops(),this.shop.shopInventory.getSeeds()),this.setView("shop"),this.playSound("openInventory")):{inventory:function(){t.map.checkIfPlantable(o,a)&&(t.setCurrentTile(l),t.playSound("openInventory"),t.modal.generateSeedModal(t.inventory.getSeeds()),t.setView("seedSelection"))},shovel:function(){if(l.hasCrop&&l.isCropReadyToHarvest){var e=l.harvestCrop();t.inventory.addCrop(e),t.map.removePlantedTile(l),t.playSound("tool")}},"watering-can":function(){l.hasCrop&&(l.isCropWatered||l.isCropReadyToHarvest||(l.waterCrop(),t.playSound("water")))},hoe:function(){l.hasCrop&&(t.map.removePlantedTile(l),t.playSound("tool"))}}[r]();break;case"inventory":var c=this.inventory,h=c.crops,u=c.seeds;this.modal.generateInventoryModal(h,u),this.playSound("openInventory"),this.setView("inventory");break;default:this.player.updateDirection(n),s[n](),this.map.checkIfWalkable(o,a)&&this.player.updatePosition(o,a)}}},{key:"plantSeed",value:function(e){this.inventory.removeSeed(e),this.currentTile.createCrop(e,this.time),this.container.appendChild(this.currentTile.crop.domElement),this.map.addPlantedTile(this.currentTile),this.setCurrentTile(null),this.playSound("plant")}},{key:"purchaseSeed",value:function(e,t){this.wallet.spendCash(t);var n=this.shop.sellSeed(e);this.inventory.addSeed(n),this.wallet.updateCashOnDom(),this.modal.resyncShopItemsAfterPurchase(),this.playSound("money")}},{key:"sellCrop",value:function(e,t){this.wallet.earnCash(t);var n=this.inventory.removeCrop(e);this.shop.buyCrop(n),this.wallet.updateCashOnDom(),this.modal.resyncShopItemsAfterPurchase(),this.playSound("money")}},{key:"handleToolNavigation",value:function(e){var t=this.toolsNavigateKeyMap[e];this.tools.navigate(t)}},{key:"setCurrentTile",value:function(e){this.currentTile=e}},{key:"setCallbacks",value:function(){this.tutorial.setViewCb(this.setView.bind(this)),this.player.playSoundCb(this.playSound.bind(this)),this.modal.setViewCb(this.setView.bind(this)),this.modal.setCurrentTileCb(this.setCurrentTile.bind(this)),this.modal.setPlantSeedCb(this.plantSeed.bind(this)),this.modal.setCheckWalletBalanceCb(this.wallet.isBalanceSufficient.bind(this.wallet)),this.modal.setPurchaseSeedCb(this.purchaseSeed.bind(this)),this.modal.setSellCropCb(this.sellCrop.bind(this))}},{key:"setListeners",value:function(){window.addEventListener("keydown",this.handleKeyPress.bind(this)),this.player.setListeners()}},{key:"setupDomElements",value:function(){this.container.appendChild(this.player.domElement),this.container.appendChild(this.tools.domElement),this.container.appendChild(this.shop.domElement),this.container.appendChild(this.wallet.domElement),this.container.appendChild(this.sound.domElement),this.shop.setPositionOnDom(),this.wallet.updateCashOnDom()}},{key:"start",value:function(){this.setCallbacks(),this.setupDomElements(),this.inventory.generatePlayerSeeds(),this.map.setShop(18,0),this.setListeners(),this.startGameLoop(),this.tutorial.show()}}])&&_(t.prototype,n),i&&_(t,i),e}())(document.getElementById("container"),document.querySelector(".modal-container"),document.querySelector(".intro-modal-container")).start()}]);